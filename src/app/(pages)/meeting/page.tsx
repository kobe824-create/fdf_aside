"use client";
import Table from "@/components/table";
import axios from "axios";
import { useRouter } from "next/navigation";
import { useEffect, useState } from "react";
import { useSearchParams } from "next/navigation";
import formatMeetingDate from "@/utils/timeFormatter";
import Button from "@/components/button";
import AttachmentPopup from "@/components/attachmentPopup";
import EditAttendancePopup from "@/components/editAttendancePopup";
import { useAuth } from "@/lib/auth/authProvider";
import { saveAs } from "file-saver";

export default function Meeting() {
    const router = useRouter();
    const { user } = useAuth();

    const params = useSearchParams();
    const meetingId = params.get("id");

    const [popupDisplay, setPopupDisplay] = useState(false);


    const [absents, setAbsents] = useState(0);
    const [presents, setPresents] = useState(0);
    const [lates, setLates] = useState(0);




    const [update, setUpdate] = useState(0);

    const [meeting, setMeeting] = useState({
        title: "",
        date: new Date(),
        startTime: new Date(),
        endTime: new Date(),
        location: "",
        description: "",
        activities: [
            {
                title: "",
                author: "",
                description: "",
                createdAt: new Date()
            }
        ],
        attachments: [
            {
                name: "",
                url: "",
                size: 0,
            }
        ],
        attendances: [
            {
                user: {
                    firstname: "",
                    lastname: "",
                },
                status: "",
                checkIn: new Date(),
                _id: "",
                key: ""
            }
        ]
    });

    useEffect(() => {
        axios.post("/api/meetings/getOne", { meetingId }).then(res => {
            setMeeting(res.data.meeting);
            setAbsents(res.data.meeting.attendances.filter((attendance: { status: string }) => attendance.status === "absent").length);
            setPresents(res.data.meeting.attendances.filter((attendance: { status: string }) => attendance.status === "present").length);
            setLates(res.data.meeting.attendances.filter((attendance: { status: string }) => attendance.status === "late").length);

            console.log(res.data.meeting.attendances);
        }).catch(err => {
            console.log(err);
        })
    }, [update]);


    const [popup, setPopup] = useState(<AttachmentPopup
        closePopup={() => {
            setPopupDisplay(false);
        }}
        id={meetingId || ""}
        setUpdate={setUpdate}
    />);

    const deleteMeeting = async () => {
        try {
            const res = await axios.post(`/api/meetings/delete`, { meetingId });
            console.log(res.data);
            router.push("/meetings");
        } catch (error) {
            console.error("Delete failed", error);
        }
    }
    const handleDownload = (fileUrl: string, fileName: string) => {
        saveAs(fileUrl, fileName);
    };

    return (
        <div className="meeting-page">
            <div className="popup-background"
                style={{ display: popupDisplay ? "flex" : "none" }}
                onClick={() => {
                    setPopupDisplay(false);
                }}
            >
                {popup}
            </div>

            <div className="meeting-body">
                <h2>
                    Meeting
                    {user?.role === "admin" && (
                        <Button
                            label="Delete Meeting"
                            onClick={deleteMeeting}
                            className="button-primary"
                        />
                    )}
                </h2>
                <div className="meeting-content">
                    <div className="meeting-side-bar">
                        <div className="meeting-side-bar-top">
                            <h3>General Information</h3>
                            <div className="meeting-infos">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M6 0H3.33333C2.44928 0 1.60143 0.351189 0.976311 0.976311C0.351189 1.60143 0 2.44928 0 3.33333L0 12.6667C0 13.1044 0.0862192 13.5379 0.253735 13.9423C0.421251 14.3467 0.666782 14.7142 0.976311 15.0237C1.60143 15.6488 2.44928 16 3.33333 16H9.33333V3.33333C9.33333 2.89559 9.24712 2.46214 9.0796 2.05772C8.91208 1.6533 8.66655 1.28584 8.35702 0.976311C8.04749 0.666782 7.68003 0.421251 7.27561 0.253735C6.87119 0.0862192 6.43774 0 6 0V0ZM3.33333 12.6667H2.66667C2.48986 12.6667 2.32029 12.5964 2.19526 12.4714C2.07024 12.3464 2 12.1768 2 12C2 11.8232 2.07024 11.6536 2.19526 11.5286C2.32029 11.4036 2.48986 11.3333 2.66667 11.3333H3.33333C3.51014 11.3333 3.67971 11.4036 3.80474 11.5286C3.92976 11.6536 4 11.8232 4 12C4 12.1768 3.92976 12.3464 3.80474 12.4714C3.67971 12.5964 3.51014 12.6667 3.33333 12.6667ZM3.33333 10H2.66667C2.48986 10 2.32029 9.92976 2.19526 9.80474C2.07024 9.67971 2 9.51014 2 9.33333C2 9.15652 2.07024 8.98695 2.19526 8.86193C2.32029 8.73691 2.48986 8.66667 2.66667 8.66667H3.33333C3.51014 8.66667 3.67971 8.73691 3.80474 8.86193C3.92976 8.98695 4 9.15652 4 9.33333C4 9.51014 3.92976 9.67971 3.80474 9.80474C3.67971 9.92976 3.51014 10 3.33333 10ZM3.33333 7.33333H2.66667C2.48986 7.33333 2.32029 7.2631 2.19526 7.13807C2.07024 7.01305 2 6.84348 2 6.66667C2 6.48986 2.07024 6.32029 2.19526 6.19526C2.32029 6.07024 2.48986 6 2.66667 6H3.33333C3.51014 6 3.67971 6.07024 3.80474 6.19526C3.92976 6.32029 4 6.48986 4 6.66667C4 6.84348 3.92976 7.01305 3.80474 7.13807C3.67971 7.2631 3.51014 7.33333 3.33333 7.33333ZM3.33333 4.66667H2.66667C2.48986 4.66667 2.32029 4.59643 2.19526 4.4714C2.07024 4.34638 2 4.17681 2 4C2 3.82319 2.07024 3.65362 2.19526 3.5286C2.32029 3.40357 2.48986 3.33333 2.66667 3.33333H3.33333C3.51014 3.33333 3.67971 3.40357 3.80474 3.5286C3.92976 3.65362 4 3.82319 4 4C4 4.17681 3.92976 4.34638 3.80474 4.4714C3.67971 4.59643 3.51014 4.66667 3.33333 4.66667ZM6.66667 12.6667H6C5.82319 12.6667 5.65362 12.5964 5.5286 12.4714C5.40357 12.3464 5.33333 12.1768 5.33333 12C5.33333 11.8232 5.40357 11.6536 5.5286 11.5286C5.65362 11.4036 5.82319 11.3333 6 11.3333H6.66667C6.84348 11.3333 7.01305 11.4036 7.13807 11.5286C7.2631 11.6536 7.33333 11.8232 7.33333 12C7.33333 12.1768 7.2631 12.3464 7.13807 12.4714C7.01305 12.5964 6.84348 12.6667 6.66667 12.6667ZM6.66667 10H6C5.82319 10 5.65362 9.92976 5.5286 9.80474C5.40357 9.67971 5.33333 9.51014 5.33333 9.33333C5.33333 9.15652 5.40357 8.98695 5.5286 8.86193C5.65362 8.73691 5.82319 8.66667 6 8.66667H6.66667C6.84348 8.66667 7.01305 8.73691 7.13807 8.86193C7.2631 8.98695 7.33333 9.15652 7.33333 9.33333C7.33333 9.51014 7.2631 9.67971 7.13807 9.80474C7.01305 9.92976 6.84348 10 6.66667 10ZM6.66667 7.33333H6C5.82319 7.33333 5.65362 7.2631 5.5286 7.13807C5.40357 7.01305 5.33333 6.84348 5.33333 6.66667C5.33333 6.48986 5.40357 6.32029 5.5286 6.19526C5.65362 6.07024 5.82319 6 6 6H6.66667C6.84348 6 7.01305 6.07024 7.13807 6.19526C7.2631 6.32029 7.33333 6.48986 7.33333 6.66667C7.33333 6.84348 7.2631 7.01305 7.13807 7.13807C7.01305 7.2631 6.84348 7.33333 6.66667 7.33333ZM6.66667 4.66667H6C5.82319 4.66667 5.65362 4.59643 5.5286 4.4714C5.40357 4.34638 5.33333 4.17681 5.33333 4C5.33333 3.82319 5.40357 3.65362 5.5286 3.5286C5.65362 3.40357 5.82319 3.33333 6 3.33333H6.66667C6.84348 3.33333 7.01305 3.40357 7.13807 3.5286C7.2631 3.65362 7.33333 3.82319 7.33333 4C7.33333 4.17681 7.2631 4.34638 7.13807 4.4714C7.01305 4.59643 6.84348 4.66667 6.66667 4.66667ZM12.6667 3.33333H10.6667V16H12.6667C13.5504 15.9989 14.3976 15.6474 15.0225 15.0225C15.6474 14.3976 15.9989 13.5504 16 12.6667V6.66667C15.9989 5.78294 15.6474 4.93571 15.0225 4.31081C14.3976 3.68592 13.5504 3.33439 12.6667 3.33333ZM13.3333 12.6667C13.2015 12.6667 13.0726 12.6276 12.963 12.5543C12.8533 12.4811 12.7679 12.3769 12.7174 12.2551C12.667 12.1333 12.6538 11.9993 12.6795 11.8699C12.7052 11.7406 12.7687 11.6218 12.8619 11.5286C12.9552 11.4354 13.074 11.3719 13.2033 11.3461C13.3326 11.3204 13.4666 11.3336 13.5885 11.3841C13.7103 11.4345 13.8144 11.52 13.8876 11.6296C13.9609 11.7393 14 11.8681 14 12C14 12.1768 13.9298 12.3464 13.8047 12.4714C13.6797 12.5964 13.5101 12.6667 13.3333 12.6667ZM13.3333 10C13.2015 10 13.0726 9.9609 12.963 9.88765C12.8533 9.81439 12.7679 9.71027 12.7174 9.58846C12.667 9.46664 12.6538 9.33259 12.6795 9.20327C12.7052 9.07395 12.7687 8.95516 12.8619 8.86193C12.9552 8.76869 13.074 8.7052 13.2033 8.67948C13.3326 8.65375 13.4666 8.66695 13.5885 8.71741C13.7103 8.76787 13.8144 8.85332 13.8876 8.96295C13.9609 9.07259 14 9.20148 14 9.33333C14 9.51014 13.9298 9.67971 13.8047 9.80474C13.6797 9.92976 13.5101 10 13.3333 10ZM13.3333 7.33333C13.2015 7.33333 13.0726 7.29423 12.963 7.22098C12.8533 7.14773 12.7679 7.04361 12.7174 6.92179C12.667 6.79997 12.6538 6.66593 12.6795 6.53661C12.7052 6.40729 12.7687 6.2885 12.8619 6.19526C12.9552 6.10203 13.074 6.03853 13.2033 6.01281C13.3326 5.98709 13.4666 6.00029 13.5885 6.05075C13.7103 6.10121 13.8144 6.18665 13.8876 6.29629C13.9609 6.40592 14 6.53481 14 6.66667C14 6.84348 13.9298 7.01305 13.8047 7.13807C13.6797 7.2631 13.5101 7.33333 13.3333 7.33333Z" fill="#727A90" />
                                </svg>
                                <div className="meeting-infos-cont">
                                    <h4>Meeting Title</h4>
                                    <p>{meeting.title}</p>
                                </div>
                            </div>
                            <div className="meeting-infos">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M6 0H3.33333C2.44928 0 1.60143 0.351189 0.976311 0.976311C0.351189 1.60143 0 2.44928 0 3.33333L0 12.6667C0 13.1044 0.0862192 13.5379 0.253735 13.9423C0.421251 14.3467 0.666782 14.7142 0.976311 15.0237C1.60143 15.6488 2.44928 16 3.33333 16H9.33333V3.33333C9.33333 2.89559 9.24712 2.46214 9.0796 2.05772C8.91208 1.6533 8.66655 1.28584 8.35702 0.976311C8.04749 0.666782 7.68003 0.421251 7.27561 0.253735C6.87119 0.0862192 6.43774 0 6 0V0ZM3.33333 12.6667H2.66667C2.48986 12.6667 2.32029 12.5964 2.19526 12.4714C2.07024 12.3464 2 12.1768 2 12C2 11.8232 2.07024 11.6536 2.19526 11.5286C2.32029 11.4036 2.48986 11.3333 2.66667 11.3333H3.33333C3.51014 11.3333 3.67971 11.4036 3.80474 11.5286C3.92976 11.6536 4 11.8232 4 12C4 12.1768 3.92976 12.3464 3.80474 12.4714C3.67971 12.5964 3.51014 12.6667 3.33333 12.6667ZM3.33333 10H2.66667C2.48986 10 2.32029 9.92976 2.19526 9.80474C2.07024 9.67971 2 9.51014 2 9.33333C2 9.15652 2.07024 8.98695 2.19526 8.86193C2.32029 8.73691 2.48986 8.66667 2.66667 8.66667H3.33333C3.51014 8.66667 3.67971 8.73691 3.80474 8.86193C3.92976 8.98695 4 9.15652 4 9.33333C4 9.51014 3.92976 9.67971 3.80474 9.80474C3.67971 9.92976 3.51014 10 3.33333 10ZM3.33333 7.33333H2.66667C2.48986 7.33333 2.32029 7.2631 2.19526 7.13807C2.07024 7.01305 2 6.84348 2 6.66667C2 6.48986 2.07024 6.32029 2.19526 6.19526C2.32029 6.07024 2.48986 6 2.66667 6H3.33333C3.51014 6 3.67971 6.07024 3.80474 6.19526C3.92976 6.32029 4 6.48986 4 6.66667C4 6.84348 3.92976 7.01305 3.80474 7.13807C3.67971 7.2631 3.51014 7.33333 3.33333 7.33333ZM3.33333 4.66667H2.66667C2.48986 4.66667 2.32029 4.59643 2.19526 4.4714C2.07024 4.34638 2 4.17681 2 4C2 3.82319 2.07024 3.65362 2.19526 3.5286C2.32029 3.40357 2.48986 3.33333 2.66667 3.33333H3.33333C3.51014 3.33333 3.67971 3.40357 3.80474 3.5286C3.92976 3.65362 4 3.82319 4 4C4 4.17681 3.92976 4.34638 3.80474 4.4714C3.67971 4.59643 3.51014 4.66667 3.33333 4.66667ZM6.66667 12.6667H6C5.82319 12.6667 5.65362 12.5964 5.5286 12.4714C5.40357 12.3464 5.33333 12.1768 5.33333 12C5.33333 11.8232 5.40357 11.6536 5.5286 11.5286C5.65362 11.4036 5.82319 11.3333 6 11.3333H6.66667C6.84348 11.3333 7.01305 11.4036 7.13807 11.5286C7.2631 11.6536 7.33333 11.8232 7.33333 12C7.33333 12.1768 7.2631 12.3464 7.13807 12.4714C7.01305 12.5964 6.84348 12.6667 6.66667 12.6667ZM6.66667 10H6C5.82319 10 5.65362 9.92976 5.5286 9.80474C5.40357 9.67971 5.33333 9.51014 5.33333 9.33333C5.33333 9.15652 5.40357 8.98695 5.5286 8.86193C5.65362 8.73691 5.82319 8.66667 6 8.66667H6.66667C6.84348 8.66667 7.01305 8.73691 7.13807 8.86193C7.2631 8.98695 7.33333 9.15652 7.33333 9.33333C7.33333 9.51014 7.2631 9.67971 7.13807 9.80474C7.01305 9.92976 6.84348 10 6.66667 10ZM6.66667 7.33333H6C5.82319 7.33333 5.65362 7.2631 5.5286 7.13807C5.40357 7.01305 5.33333 6.84348 5.33333 6.66667C5.33333 6.48986 5.40357 6.32029 5.5286 6.19526C5.65362 6.07024 5.82319 6 6 6H6.66667C6.84348 6 7.01305 6.07024 7.13807 6.19526C7.2631 6.32029 7.33333 6.48986 7.33333 6.66667C7.33333 6.84348 7.2631 7.01305 7.13807 7.13807C7.01305 7.2631 6.84348 7.33333 6.66667 7.33333ZM6.66667 4.66667H6C5.82319 4.66667 5.65362 4.59643 5.5286 4.4714C5.40357 4.34638 5.33333 4.17681 5.33333 4C5.33333 3.82319 5.40357 3.65362 5.5286 3.5286C5.65362 3.40357 5.82319 3.33333 6 3.33333H6.66667C6.84348 3.33333 7.01305 3.40357 7.13807 3.5286C7.2631 3.65362 7.33333 3.82319 7.33333 4C7.33333 4.17681 7.2631 4.34638 7.13807 4.4714C7.01305 4.59643 6.84348 4.66667 6.66667 4.66667ZM12.6667 3.33333H10.6667V16H12.6667C13.5504 15.9989 14.3976 15.6474 15.0225 15.0225C15.6474 14.3976 15.9989 13.5504 16 12.6667V6.66667C15.9989 5.78294 15.6474 4.93571 15.0225 4.31081C14.3976 3.68592 13.5504 3.33439 12.6667 3.33333ZM13.3333 12.6667C13.2015 12.6667 13.0726 12.6276 12.963 12.5543C12.8533 12.4811 12.7679 12.3769 12.7174 12.2551C12.667 12.1333 12.6538 11.9993 12.6795 11.8699C12.7052 11.7406 12.7687 11.6218 12.8619 11.5286C12.9552 11.4354 13.074 11.3719 13.2033 11.3461C13.3326 11.3204 13.4666 11.3336 13.5885 11.3841C13.7103 11.4345 13.8144 11.52 13.8876 11.6296C13.9609 11.7393 14 11.8681 14 12C14 12.1768 13.9298 12.3464 13.8047 12.4714C13.6797 12.5964 13.5101 12.6667 13.3333 12.6667ZM13.3333 10C13.2015 10 13.0726 9.9609 12.963 9.88765C12.8533 9.81439 12.7679 9.71027 12.7174 9.58846C12.667 9.46664 12.6538 9.33259 12.6795 9.20327C12.7052 9.07395 12.7687 8.95516 12.8619 8.86193C12.9552 8.76869 13.074 8.7052 13.2033 8.67948C13.3326 8.65375 13.4666 8.66695 13.5885 8.71741C13.7103 8.76787 13.8144 8.85332 13.8876 8.96295C13.9609 9.07259 14 9.20148 14 9.33333C14 9.51014 13.9298 9.67971 13.8047 9.80474C13.6797 9.92976 13.5101 10 13.3333 10ZM13.3333 7.33333C13.2015 7.33333 13.0726 7.29423 12.963 7.22098C12.8533 7.14773 12.7679 7.04361 12.7174 6.92179C12.667 6.79997 12.6538 6.66593 12.6795 6.53661C12.7052 6.40729 12.7687 6.2885 12.8619 6.19526C12.9552 6.10203 13.074 6.03853 13.2033 6.01281C13.3326 5.98709 13.4666 6.00029 13.5885 6.05075C13.7103 6.10121 13.8144 6.18665 13.8876 6.29629C13.9609 6.40592 14 6.53481 14 6.66667C14 6.84348 13.9298 7.01305 13.8047 7.13807C13.6797 7.2631 13.5101 7.33333 13.3333 7.33333Z" fill="#727A90" />
                                </svg>
                                <div className="meeting-infos-cont">
                                    <h4>Date & Time</h4>
                                    <p>
                                        {formatMeetingDate(meeting.date.toString(), meeting.startTime.toString(), meeting.endTime.toString())}
                                    </p>

                                </div>
                            </div>
                            <div className="meeting-infos">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M6 0H3.33333C2.44928 0 1.60143 0.351189 0.976311 0.976311C0.351189 1.60143 0 2.44928 0 3.33333L0 12.6667C0 13.1044 0.0862192 13.5379 0.253735 13.9423C0.421251 14.3467 0.666782 14.7142 0.976311 15.0237C1.60143 15.6488 2.44928 16 3.33333 16H9.33333V3.33333C9.33333 2.89559 9.24712 2.46214 9.0796 2.05772C8.91208 1.6533 8.66655 1.28584 8.35702 0.976311C8.04749 0.666782 7.68003 0.421251 7.27561 0.253735C6.87119 0.0862192 6.43774 0 6 0V0ZM3.33333 12.6667H2.66667C2.48986 12.6667 2.32029 12.5964 2.19526 12.4714C2.07024 12.3464 2 12.1768 2 12C2 11.8232 2.07024 11.6536 2.19526 11.5286C2.32029 11.4036 2.48986 11.3333 2.66667 11.3333H3.33333C3.51014 11.3333 3.67971 11.4036 3.80474 11.5286C3.92976 11.6536 4 11.8232 4 12C4 12.1768 3.92976 12.3464 3.80474 12.4714C3.67971 12.5964 3.51014 12.6667 3.33333 12.6667ZM3.33333 10H2.66667C2.48986 10 2.32029 9.92976 2.19526 9.80474C2.07024 9.67971 2 9.51014 2 9.33333C2 9.15652 2.07024 8.98695 2.19526 8.86193C2.32029 8.73691 2.48986 8.66667 2.66667 8.66667H3.33333C3.51014 8.66667 3.67971 8.73691 3.80474 8.86193C3.92976 8.98695 4 9.15652 4 9.33333C4 9.51014 3.92976 9.67971 3.80474 9.80474C3.67971 9.92976 3.51014 10 3.33333 10ZM3.33333 7.33333H2.66667C2.48986 7.33333 2.32029 7.2631 2.19526 7.13807C2.07024 7.01305 2 6.84348 2 6.66667C2 6.48986 2.07024 6.32029 2.19526 6.19526C2.32029 6.07024 2.48986 6 2.66667 6H3.33333C3.51014 6 3.67971 6.07024 3.80474 6.19526C3.92976 6.32029 4 6.48986 4 6.66667C4 6.84348 3.92976 7.01305 3.80474 7.13807C3.67971 7.2631 3.51014 7.33333 3.33333 7.33333ZM3.33333 4.66667H2.66667C2.48986 4.66667 2.32029 4.59643 2.19526 4.4714C2.07024 4.34638 2 4.17681 2 4C2 3.82319 2.07024 3.65362 2.19526 3.5286C2.32029 3.40357 2.48986 3.33333 2.66667 3.33333H3.33333C3.51014 3.33333 3.67971 3.40357 3.80474 3.5286C3.92976 3.65362 4 3.82319 4 4C4 4.17681 3.92976 4.34638 3.80474 4.4714C3.67971 4.59643 3.51014 4.66667 3.33333 4.66667ZM6.66667 12.6667H6C5.82319 12.6667 5.65362 12.5964 5.5286 12.4714C5.40357 12.3464 5.33333 12.1768 5.33333 12C5.33333 11.8232 5.40357 11.6536 5.5286 11.5286C5.65362 11.4036 5.82319 11.3333 6 11.3333H6.66667C6.84348 11.3333 7.01305 11.4036 7.13807 11.5286C7.2631 11.6536 7.33333 11.8232 7.33333 12C7.33333 12.1768 7.2631 12.3464 7.13807 12.4714C7.01305 12.5964 6.84348 12.6667 6.66667 12.6667ZM6.66667 10H6C5.82319 10 5.65362 9.92976 5.5286 9.80474C5.40357 9.67971 5.33333 9.51014 5.33333 9.33333C5.33333 9.15652 5.40357 8.98695 5.5286 8.86193C5.65362 8.73691 5.82319 8.66667 6 8.66667H6.66667C6.84348 8.66667 7.01305 8.73691 7.13807 8.86193C7.2631 8.98695 7.33333 9.15652 7.33333 9.33333C7.33333 9.51014 7.2631 9.67971 7.13807 9.80474C7.01305 9.92976 6.84348 10 6.66667 10ZM6.66667 7.33333H6C5.82319 7.33333 5.65362 7.2631 5.5286 7.13807C5.40357 7.01305 5.33333 6.84348 5.33333 6.66667C5.33333 6.48986 5.40357 6.32029 5.5286 6.19526C5.65362 6.07024 5.82319 6 6 6H6.66667C6.84348 6 7.01305 6.07024 7.13807 6.19526C7.2631 6.32029 7.33333 6.48986 7.33333 6.66667C7.33333 6.84348 7.2631 7.01305 7.13807 7.13807C7.01305 7.2631 6.84348 7.33333 6.66667 7.33333ZM6.66667 4.66667H6C5.82319 4.66667 5.65362 4.59643 5.5286 4.4714C5.40357 4.34638 5.33333 4.17681 5.33333 4C5.33333 3.82319 5.40357 3.65362 5.5286 3.5286C5.65362 3.40357 5.82319 3.33333 6 3.33333H6.66667C6.84348 3.33333 7.01305 3.40357 7.13807 3.5286C7.2631 3.65362 7.33333 3.82319 7.33333 4C7.33333 4.17681 7.2631 4.34638 7.13807 4.4714C7.01305 4.59643 6.84348 4.66667 6.66667 4.66667ZM12.6667 3.33333H10.6667V16H12.6667C13.5504 15.9989 14.3976 15.6474 15.0225 15.0225C15.6474 14.3976 15.9989 13.5504 16 12.6667V6.66667C15.9989 5.78294 15.6474 4.93571 15.0225 4.31081C14.3976 3.68592 13.5504 3.33439 12.6667 3.33333ZM13.3333 12.6667C13.2015 12.6667 13.0726 12.6276 12.963 12.5543C12.8533 12.4811 12.7679 12.3769 12.7174 12.2551C12.667 12.1333 12.6538 11.9993 12.6795 11.8699C12.7052 11.7406 12.7687 11.6218 12.8619 11.5286C12.9552 11.4354 13.074 11.3719 13.2033 11.3461C13.3326 11.3204 13.4666 11.3336 13.5885 11.3841C13.7103 11.4345 13.8144 11.52 13.8876 11.6296C13.9609 11.7393 14 11.8681 14 12C14 12.1768 13.9298 12.3464 13.8047 12.4714C13.6797 12.5964 13.5101 12.6667 13.3333 12.6667ZM13.3333 10C13.2015 10 13.0726 9.9609 12.963 9.88765C12.8533 9.81439 12.7679 9.71027 12.7174 9.58846C12.667 9.46664 12.6538 9.33259 12.6795 9.20327C12.7052 9.07395 12.7687 8.95516 12.8619 8.86193C12.9552 8.76869 13.074 8.7052 13.2033 8.67948C13.3326 8.65375 13.4666 8.66695 13.5885 8.71741C13.7103 8.76787 13.8144 8.85332 13.8876 8.96295C13.9609 9.07259 14 9.20148 14 9.33333C14 9.51014 13.9298 9.67971 13.8047 9.80474C13.6797 9.92976 13.5101 10 13.3333 10ZM13.3333 7.33333C13.2015 7.33333 13.0726 7.29423 12.963 7.22098C12.8533 7.14773 12.7679 7.04361 12.7174 6.92179C12.667 6.79997 12.6538 6.66593 12.6795 6.53661C12.7052 6.40729 12.7687 6.2885 12.8619 6.19526C12.9552 6.10203 13.074 6.03853 13.2033 6.01281C13.3326 5.98709 13.4666 6.00029 13.5885 6.05075C13.7103 6.10121 13.8144 6.18665 13.8876 6.29629C13.9609 6.40592 14 6.53481 14 6.66667C14 6.84348 13.9298 7.01305 13.8047 7.13807C13.6797 7.2631 13.5101 7.33333 13.3333 7.33333Z" fill="#727A90" />
                                </svg>
                                <div className="meeting-infos-cont">
                                    <h4>Total Attended on time</h4>
                                    <p>{presents} Members </p>
                                </div>
                            </div>
                            <div className="meeting-infos">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M6 0H3.33333C2.44928 0 1.60143 0.351189 0.976311 0.976311C0.351189 1.60143 0 2.44928 0 3.33333L0 12.6667C0 13.1044 0.0862192 13.5379 0.253735 13.9423C0.421251 14.3467 0.666782 14.7142 0.976311 15.0237C1.60143 15.6488 2.44928 16 3.33333 16H9.33333V3.33333C9.33333 2.89559 9.24712 2.46214 9.0796 2.05772C8.91208 1.6533 8.66655 1.28584 8.35702 0.976311C8.04749 0.666782 7.68003 0.421251 7.27561 0.253735C6.87119 0.0862192 6.43774 0 6 0V0ZM3.33333 12.6667H2.66667C2.48986 12.6667 2.32029 12.5964 2.19526 12.4714C2.07024 12.3464 2 12.1768 2 12C2 11.8232 2.07024 11.6536 2.19526 11.5286C2.32029 11.4036 2.48986 11.3333 2.66667 11.3333H3.33333C3.51014 11.3333 3.67971 11.4036 3.80474 11.5286C3.92976 11.6536 4 11.8232 4 12C4 12.1768 3.92976 12.3464 3.80474 12.4714C3.67971 12.5964 3.51014 12.6667 3.33333 12.6667ZM3.33333 10H2.66667C2.48986 10 2.32029 9.92976 2.19526 9.80474C2.07024 9.67971 2 9.51014 2 9.33333C2 9.15652 2.07024 8.98695 2.19526 8.86193C2.32029 8.73691 2.48986 8.66667 2.66667 8.66667H3.33333C3.51014 8.66667 3.67971 8.73691 3.80474 8.86193C3.92976 8.98695 4 9.15652 4 9.33333C4 9.51014 3.92976 9.67971 3.80474 9.80474C3.67971 9.92976 3.51014 10 3.33333 10ZM3.33333 7.33333H2.66667C2.48986 7.33333 2.32029 7.2631 2.19526 7.13807C2.07024 7.01305 2 6.84348 2 6.66667C2 6.48986 2.07024 6.32029 2.19526 6.19526C2.32029 6.07024 2.48986 6 2.66667 6H3.33333C3.51014 6 3.67971 6.07024 3.80474 6.19526C3.92976 6.32029 4 6.48986 4 6.66667C4 6.84348 3.92976 7.01305 3.80474 7.13807C3.67971 7.2631 3.51014 7.33333 3.33333 7.33333ZM3.33333 4.66667H2.66667C2.48986 4.66667 2.32029 4.59643 2.19526 4.4714C2.07024 4.34638 2 4.17681 2 4C2 3.82319 2.07024 3.65362 2.19526 3.5286C2.32029 3.40357 2.48986 3.33333 2.66667 3.33333H3.33333C3.51014 3.33333 3.67971 3.40357 3.80474 3.5286C3.92976 3.65362 4 3.82319 4 4C4 4.17681 3.92976 4.34638 3.80474 4.4714C3.67971 4.59643 3.51014 4.66667 3.33333 4.66667ZM6.66667 12.6667H6C5.82319 12.6667 5.65362 12.5964 5.5286 12.4714C5.40357 12.3464 5.33333 12.1768 5.33333 12C5.33333 11.8232 5.40357 11.6536 5.5286 11.5286C5.65362 11.4036 5.82319 11.3333 6 11.3333H6.66667C6.84348 11.3333 7.01305 11.4036 7.13807 11.5286C7.2631 11.6536 7.33333 11.8232 7.33333 12C7.33333 12.1768 7.2631 12.3464 7.13807 12.4714C7.01305 12.5964 6.84348 12.6667 6.66667 12.6667ZM6.66667 10H6C5.82319 10 5.65362 9.92976 5.5286 9.80474C5.40357 9.67971 5.33333 9.51014 5.33333 9.33333C5.33333 9.15652 5.40357 8.98695 5.5286 8.86193C5.65362 8.73691 5.82319 8.66667 6 8.66667H6.66667C6.84348 8.66667 7.01305 8.73691 7.13807 8.86193C7.2631 8.98695 7.33333 9.15652 7.33333 9.33333C7.33333 9.51014 7.2631 9.67971 7.13807 9.80474C7.01305 9.92976 6.84348 10 6.66667 10ZM6.66667 7.33333H6C5.82319 7.33333 5.65362 7.2631 5.5286 7.13807C5.40357 7.01305 5.33333 6.84348 5.33333 6.66667C5.33333 6.48986 5.40357 6.32029 5.5286 6.19526C5.65362 6.07024 5.82319 6 6 6H6.66667C6.84348 6 7.01305 6.07024 7.13807 6.19526C7.2631 6.32029 7.33333 6.48986 7.33333 6.66667C7.33333 6.84348 7.2631 7.01305 7.13807 7.13807C7.01305 7.2631 6.84348 7.33333 6.66667 7.33333ZM6.66667 4.66667H6C5.82319 4.66667 5.65362 4.59643 5.5286 4.4714C5.40357 4.34638 5.33333 4.17681 5.33333 4C5.33333 3.82319 5.40357 3.65362 5.5286 3.5286C5.65362 3.40357 5.82319 3.33333 6 3.33333H6.66667C6.84348 3.33333 7.01305 3.40357 7.13807 3.5286C7.2631 3.65362 7.33333 3.82319 7.33333 4C7.33333 4.17681 7.2631 4.34638 7.13807 4.4714C7.01305 4.59643 6.84348 4.66667 6.66667 4.66667ZM12.6667 3.33333H10.6667V16H12.6667C13.5504 15.9989 14.3976 15.6474 15.0225 15.0225C15.6474 14.3976 15.9989 13.5504 16 12.6667V6.66667C15.9989 5.78294 15.6474 4.93571 15.0225 4.31081C14.3976 3.68592 13.5504 3.33439 12.6667 3.33333ZM13.3333 12.6667C13.2015 12.6667 13.0726 12.6276 12.963 12.5543C12.8533 12.4811 12.7679 12.3769 12.7174 12.2551C12.667 12.1333 12.6538 11.9993 12.6795 11.8699C12.7052 11.7406 12.7687 11.6218 12.8619 11.5286C12.9552 11.4354 13.074 11.3719 13.2033 11.3461C13.3326 11.3204 13.4666 11.3336 13.5885 11.3841C13.7103 11.4345 13.8144 11.52 13.8876 11.6296C13.9609 11.7393 14 11.8681 14 12C14 12.1768 13.9298 12.3464 13.8047 12.4714C13.6797 12.5964 13.5101 12.6667 13.3333 12.6667ZM13.3333 10C13.2015 10 13.0726 9.9609 12.963 9.88765C12.8533 9.81439 12.7679 9.71027 12.7174 9.58846C12.667 9.46664 12.6538 9.33259 12.6795 9.20327C12.7052 9.07395 12.7687 8.95516 12.8619 8.86193C12.9552 8.76869 13.074 8.7052 13.2033 8.67948C13.3326 8.65375 13.4666 8.66695 13.5885 8.71741C13.7103 8.76787 13.8144 8.85332 13.8876 8.96295C13.9609 9.07259 14 9.20148 14 9.33333C14 9.51014 13.9298 9.67971 13.8047 9.80474C13.6797 9.92976 13.5101 10 13.3333 10ZM13.3333 7.33333C13.2015 7.33333 13.0726 7.29423 12.963 7.22098C12.8533 7.14773 12.7679 7.04361 12.7174 6.92179C12.667 6.79997 12.6538 6.66593 12.6795 6.53661C12.7052 6.40729 12.7687 6.2885 12.8619 6.19526C12.9552 6.10203 13.074 6.03853 13.2033 6.01281C13.3326 5.98709 13.4666 6.00029 13.5885 6.05075C13.7103 6.10121 13.8144 6.18665 13.8876 6.29629C13.9609 6.40592 14 6.53481 14 6.66667C14 6.84348 13.9298 7.01305 13.8047 7.13807C13.6797 7.2631 13.5101 7.33333 13.3333 7.33333Z" fill="#727A90" />
                                </svg>
                                <div className="meeting-infos-cont">
                                    <h4>Total attended Late</h4>
                                    <p>{lates} Members</p>
                                </div>
                            </div>
                            <div className="meeting-infos">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M6 0H3.33333C2.44928 0 1.60143 0.351189 0.976311 0.976311C0.351189 1.60143 0 2.44928 0 3.33333L0 12.6667C0 13.1044 0.0862192 13.5379 0.253735 13.9423C0.421251 14.3467 0.666782 14.7142 0.976311 15.0237C1.60143 15.6488 2.44928 16 3.33333 16H9.33333V3.33333C9.33333 2.89559 9.24712 2.46214 9.0796 2.05772C8.91208 1.6533 8.66655 1.28584 8.35702 0.976311C8.04749 0.666782 7.68003 0.421251 7.27561 0.253735C6.87119 0.0862192 6.43774 0 6 0V0ZM3.33333 12.6667H2.66667C2.48986 12.6667 2.32029 12.5964 2.19526 12.4714C2.07024 12.3464 2 12.1768 2 12C2 11.8232 2.07024 11.6536 2.19526 11.5286C2.32029 11.4036 2.48986 11.3333 2.66667 11.3333H3.33333C3.51014 11.3333 3.67971 11.4036 3.80474 11.5286C3.92976 11.6536 4 11.8232 4 12C4 12.1768 3.92976 12.3464 3.80474 12.4714C3.67971 12.5964 3.51014 12.6667 3.33333 12.6667ZM3.33333 10H2.66667C2.48986 10 2.32029 9.92976 2.19526 9.80474C2.07024 9.67971 2 9.51014 2 9.33333C2 9.15652 2.07024 8.98695 2.19526 8.86193C2.32029 8.73691 2.48986 8.66667 2.66667 8.66667H3.33333C3.51014 8.66667 3.67971 8.73691 3.80474 8.86193C3.92976 8.98695 4 9.15652 4 9.33333C4 9.51014 3.92976 9.67971 3.80474 9.80474C3.67971 9.92976 3.51014 10 3.33333 10ZM3.33333 7.33333H2.66667C2.48986 7.33333 2.32029 7.2631 2.19526 7.13807C2.07024 7.01305 2 6.84348 2 6.66667C2 6.48986 2.07024 6.32029 2.19526 6.19526C2.32029 6.07024 2.48986 6 2.66667 6H3.33333C3.51014 6 3.67971 6.07024 3.80474 6.19526C3.92976 6.32029 4 6.48986 4 6.66667C4 6.84348 3.92976 7.01305 3.80474 7.13807C3.67971 7.2631 3.51014 7.33333 3.33333 7.33333ZM3.33333 4.66667H2.66667C2.48986 4.66667 2.32029 4.59643 2.19526 4.4714C2.07024 4.34638 2 4.17681 2 4C2 3.82319 2.07024 3.65362 2.19526 3.5286C2.32029 3.40357 2.48986 3.33333 2.66667 3.33333H3.33333C3.51014 3.33333 3.67971 3.40357 3.80474 3.5286C3.92976 3.65362 4 3.82319 4 4C4 4.17681 3.92976 4.34638 3.80474 4.4714C3.67971 4.59643 3.51014 4.66667 3.33333 4.66667ZM6.66667 12.6667H6C5.82319 12.6667 5.65362 12.5964 5.5286 12.4714C5.40357 12.3464 5.33333 12.1768 5.33333 12C5.33333 11.8232 5.40357 11.6536 5.5286 11.5286C5.65362 11.4036 5.82319 11.3333 6 11.3333H6.66667C6.84348 11.3333 7.01305 11.4036 7.13807 11.5286C7.2631 11.6536 7.33333 11.8232 7.33333 12C7.33333 12.1768 7.2631 12.3464 7.13807 12.4714C7.01305 12.5964 6.84348 12.6667 6.66667 12.6667ZM6.66667 10H6C5.82319 10 5.65362 9.92976 5.5286 9.80474C5.40357 9.67971 5.33333 9.51014 5.33333 9.33333C5.33333 9.15652 5.40357 8.98695 5.5286 8.86193C5.65362 8.73691 5.82319 8.66667 6 8.66667H6.66667C6.84348 8.66667 7.01305 8.73691 7.13807 8.86193C7.2631 8.98695 7.33333 9.15652 7.33333 9.33333C7.33333 9.51014 7.2631 9.67971 7.13807 9.80474C7.01305 9.92976 6.84348 10 6.66667 10ZM6.66667 7.33333H6C5.82319 7.33333 5.65362 7.2631 5.5286 7.13807C5.40357 7.01305 5.33333 6.84348 5.33333 6.66667C5.33333 6.48986 5.40357 6.32029 5.5286 6.19526C5.65362 6.07024 5.82319 6 6 6H6.66667C6.84348 6 7.01305 6.07024 7.13807 6.19526C7.2631 6.32029 7.33333 6.48986 7.33333 6.66667C7.33333 6.84348 7.2631 7.01305 7.13807 7.13807C7.01305 7.2631 6.84348 7.33333 6.66667 7.33333ZM6.66667 4.66667H6C5.82319 4.66667 5.65362 4.59643 5.5286 4.4714C5.40357 4.34638 5.33333 4.17681 5.33333 4C5.33333 3.82319 5.40357 3.65362 5.5286 3.5286C5.65362 3.40357 5.82319 3.33333 6 3.33333H6.66667C6.84348 3.33333 7.01305 3.40357 7.13807 3.5286C7.2631 3.65362 7.33333 3.82319 7.33333 4C7.33333 4.17681 7.2631 4.34638 7.13807 4.4714C7.01305 4.59643 6.84348 4.66667 6.66667 4.66667ZM12.6667 3.33333H10.6667V16H12.6667C13.5504 15.9989 14.3976 15.6474 15.0225 15.0225C15.6474 14.3976 15.9989 13.5504 16 12.6667V6.66667C15.9989 5.78294 15.6474 4.93571 15.0225 4.31081C14.3976 3.68592 13.5504 3.33439 12.6667 3.33333ZM13.3333 12.6667C13.2015 12.6667 13.0726 12.6276 12.963 12.5543C12.8533 12.4811 12.7679 12.3769 12.7174 12.2551C12.667 12.1333 12.6538 11.9993 12.6795 11.8699C12.7052 11.7406 12.7687 11.6218 12.8619 11.5286C12.9552 11.4354 13.074 11.3719 13.2033 11.3461C13.3326 11.3204 13.4666 11.3336 13.5885 11.3841C13.7103 11.4345 13.8144 11.52 13.8876 11.6296C13.9609 11.7393 14 11.8681 14 12C14 12.1768 13.9298 12.3464 13.8047 12.4714C13.6797 12.5964 13.5101 12.6667 13.3333 12.6667ZM13.3333 10C13.2015 10 13.0726 9.9609 12.963 9.88765C12.8533 9.81439 12.7679 9.71027 12.7174 9.58846C12.667 9.46664 12.6538 9.33259 12.6795 9.20327C12.7052 9.07395 12.7687 8.95516 12.8619 8.86193C12.9552 8.76869 13.074 8.7052 13.2033 8.67948C13.3326 8.65375 13.4666 8.66695 13.5885 8.71741C13.7103 8.76787 13.8144 8.85332 13.8876 8.96295C13.9609 9.07259 14 9.20148 14 9.33333C14 9.51014 13.9298 9.67971 13.8047 9.80474C13.6797 9.92976 13.5101 10 13.3333 10ZM13.3333 7.33333C13.2015 7.33333 13.0726 7.29423 12.963 7.22098C12.8533 7.14773 12.7679 7.04361 12.7174 6.92179C12.667 6.79997 12.6538 6.66593 12.6795 6.53661C12.7052 6.40729 12.7687 6.2885 12.8619 6.19526C12.9552 6.10203 13.074 6.03853 13.2033 6.01281C13.3326 5.98709 13.4666 6.00029 13.5885 6.05075C13.7103 6.10121 13.8144 6.18665 13.8876 6.29629C13.9609 6.40592 14 6.53481 14 6.66667C14 6.84348 13.9298 7.01305 13.8047 7.13807C13.6797 7.2631 13.5101 7.33333 13.3333 7.33333Z" fill="#727A90" />
                                </svg>
                                <div className="meeting-infos-cont">
                                    <h4>Total Absent</h4>
                                    <p>{absents} Members</p>
                                </div>
                            </div>

                        </div>
                        <div className="meeting-side-bar-top">
                            <h3>
                                Attachments
                             {user?.role === "admin" && (
                                <Button
                                    label="Add Attachment"
                                    className="button-primary"
                                    onClick={() => {
                                        setPopupDisplay(true);
                                        setPopup(<AttachmentPopup
                                            closePopup={() => {
                                                setPopupDisplay(false);
                                            }}
                                            id={meetingId || ""}
                                            setUpdate={setUpdate}
                                        />
                                        )
                                    }
                                }
                                />)}
                            </h3>
                            {/* <div className="attachment">
                                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none">
                                    <path fillRule="evenodd" clipRule="evenodd" d="M6.6665 5.8335C6.6665 4.45278 7.78579 3.3335 9.1665 3.3335H25.631C26.294 3.3335 26.9299 3.59689 27.3987 4.06573L32.6009 9.26793C33.0698 9.73677 33.3332 10.3727 33.3332 11.0357V34.1668C33.3332 35.5475 32.2139 36.6668 30.8332 36.6668H9.1665C7.78579 36.6668 6.6665 35.5475 6.6665 34.1668V5.8335ZM31.6665 11.6668H25.8332C25.3729 11.6668 24.9998 11.2937 24.9998 10.8335V5.00016H9.1665C8.70627 5.00016 8.33317 5.37326 8.33317 5.8335V34.1668C8.33317 34.6271 8.70627 35.0002 9.1665 35.0002H30.8332C31.2934 35.0002 31.6665 34.6271 31.6665 34.1668V11.6668Z" fill="#F1F2F4" />
                                    <path d="M6.6665 15.8335H33.3332V25.8335H6.6665V15.8335Z" fill="#3B82F6" />
                                    <path d="M13.1157 24.1669H10.8755V18.1063H13.1127C13.7302 18.1063 14.2619 18.2276 14.7078 18.4703C15.1556 18.711 15.5008 19.0582 15.7435 19.512C15.9862 19.9637 16.1075 20.5043 16.1075 21.1336C16.1075 21.765 15.9862 22.3075 15.7435 22.7612C15.5028 23.215 15.1586 23.5632 14.7107 23.8059C14.2629 24.0466 13.7312 24.1669 13.1157 24.1669ZM12.3403 22.9181H13.0594C13.3988 22.9181 13.6858 22.8609 13.9206 22.7464C14.1573 22.6301 14.3359 22.4416 14.4562 22.1812C14.5785 21.9188 14.6397 21.5696 14.6397 21.1336C14.6397 20.6976 14.5785 20.3504 14.4562 20.092C14.3339 19.8316 14.1534 19.6441 13.9147 19.5297C13.6779 19.4133 13.3859 19.3551 13.0387 19.3551H12.3403V22.9181Z" fill="white" />
                                    <path d="M22.683 21.1366C22.683 21.8034 22.5548 22.3686 22.2983 22.8323C22.0418 23.2959 21.6946 23.648 21.2566 23.8887C20.8206 24.1294 20.3314 24.2498 19.7888 24.2498C19.2443 24.2498 18.7541 24.1284 18.3181 23.8858C17.8821 23.6431 17.5358 23.291 17.2794 22.8293C17.0249 22.3657 16.8976 21.8015 16.8976 21.1366C16.8976 20.4698 17.0249 19.9046 17.2794 19.4409C17.5358 18.9773 17.8821 18.6252 18.3181 18.3845C18.7541 18.1438 19.2443 18.0234 19.7888 18.0234C20.3314 18.0234 20.8206 18.1438 21.2566 18.3845C21.6946 18.6252 22.0418 18.9773 22.2983 19.4409C22.5548 19.9046 22.683 20.4698 22.683 21.1366ZM21.1856 21.1366C21.1856 20.742 21.1294 20.4086 21.0169 20.1364C20.9065 19.8641 20.7467 19.6579 20.5375 19.5179C20.3304 19.3778 20.0808 19.3078 19.7888 19.3078C19.4988 19.3078 19.2493 19.3778 19.0401 19.5179C18.831 19.6579 18.6702 19.8641 18.5578 20.1364C18.4473 20.4086 18.3921 20.742 18.3921 21.1366C18.3921 21.5312 18.4473 21.8646 18.5578 22.1368C18.6702 22.4091 18.831 22.6153 19.0401 22.7553C19.2493 22.8954 19.4988 22.9654 19.7888 22.9654C20.0808 22.9654 20.3304 22.8954 20.5375 22.7553C20.7467 22.6153 20.9065 22.4091 21.0169 22.1368C21.1294 21.8646 21.1856 21.5312 21.1856 21.1366Z" fill="white" />
                                    <path d="M29.0396 20.3021H27.5599C27.5402 20.1502 27.4997 20.0131 27.4386 19.8907C27.3774 19.7684 27.2965 19.6639 27.1959 19.5771C27.0953 19.4903 26.9759 19.4242 26.8378 19.3788C26.7017 19.3314 26.5508 19.3078 26.3851 19.3078C26.0911 19.3078 25.8376 19.3798 25.6245 19.5238C25.4134 19.6678 25.2507 19.8759 25.1363 20.1482C25.0238 20.4205 24.9676 20.7499 24.9676 21.1366C24.9676 21.5391 25.0248 21.8764 25.1392 22.1487C25.2556 22.419 25.4184 22.6231 25.6275 22.7612C25.8386 22.8974 26.0882 22.9654 26.3762 22.9654C26.538 22.9654 26.6849 22.9447 26.8171 22.9033C26.9513 22.8619 27.0687 22.8017 27.1693 22.7228C27.2719 22.6419 27.3557 22.5442 27.4208 22.4298C27.4879 22.3134 27.5343 22.1822 27.5599 22.0362L29.0396 22.0451C29.0139 22.3134 28.936 22.5778 28.8058 22.8382C28.6775 23.0986 28.501 23.3363 28.2761 23.5514C28.0512 23.7644 27.7769 23.9341 27.4534 24.0604C27.1318 24.1866 26.7629 24.2498 26.3466 24.2498C25.7982 24.2498 25.3069 24.1294 24.8729 23.8887C24.4408 23.6461 24.0995 23.2929 23.849 22.8293C23.5984 22.3657 23.4731 21.8015 23.4731 21.1366C23.4731 20.4698 23.6004 19.9046 23.8549 19.4409C24.1094 18.9773 24.4537 18.6252 24.8877 18.3845C25.3217 18.1438 25.808 18.0234 26.3466 18.0234C26.7136 18.0234 27.0529 18.0747 27.3646 18.1773C27.6763 18.2779 27.9505 18.4259 28.1873 18.6212C28.424 18.8146 28.6164 19.0523 28.7643 19.3344C28.9123 19.6165 29.004 19.9391 29.0396 20.3021Z" fill="white" />
                                </svg>
                                <div className="attachment-infos">
                                    <h4>Geological Map</h4>
                                    <p>300 KB</p>
                                </div>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none" className="download-attachment-icon">
                                    <g clipPath="url(#clip0_220_7263)">
                                        <path d="M6.58565 12.0813C6.77138 12.2672 6.99192 12.4146 7.23465 12.5152C7.47738 12.6158 7.73756 12.6676 8.00031 12.6676C8.26306 12.6676 8.52324 12.6158 8.76598 12.5152C9.00871 12.4146 9.22925 12.2672 9.41498 12.0813L11.5556 9.94067C11.6704 9.81373 11.732 9.64752 11.7276 9.47644C11.7232 9.30536 11.6532 9.14253 11.532 9.02165C11.4109 8.90077 11.2479 8.8311 11.0768 8.82707C10.9058 8.82304 10.7397 8.88496 10.613 9L8.66231 10.9513L8.66698 0.666667C8.66698 0.489856 8.59674 0.320286 8.47172 0.195262C8.34669 0.0702379 8.17712 0 8.00031 0V0C7.8235 0 7.65393 0.0702379 7.52891 0.195262C7.40388 0.320286 7.33365 0.489856 7.33365 0.666667L7.32765 10.9387L5.38765 9C5.26255 8.875 5.09292 8.8048 4.91608 8.80486C4.73923 8.80493 4.56965 8.87524 4.44465 9.00033C4.31964 9.12543 4.24945 9.29506 4.24951 9.4719C4.24957 9.64875 4.31989 9.81833 4.44498 9.94333L6.58565 12.0813Z" fill="#727A90" />
                                        <path d="M15.3333 10.6665C15.1565 10.6665 14.987 10.7367 14.8619 10.8618C14.7369 10.9868 14.6667 11.1564 14.6667 11.3332V13.9998C14.6667 14.1766 14.5964 14.3462 14.4714 14.4712C14.3464 14.5963 14.1768 14.6665 14 14.6665H2C1.82319 14.6665 1.65362 14.5963 1.5286 14.4712C1.40357 14.3462 1.33333 14.1766 1.33333 13.9998V11.3332C1.33333 11.1564 1.2631 10.9868 1.13807 10.8618C1.01305 10.7367 0.843478 10.6665 0.666667 10.6665C0.489856 10.6665 0.320286 10.7367 0.195262 10.8618C0.0702379 10.9868 0 11.1564 0 11.3332L0 13.9998C0 14.5303 0.210714 15.039 0.585786 15.414C0.960859 15.7891 1.46957 15.9998 2 15.9998H14C14.5304 15.9998 15.0391 15.7891 15.4142 15.414C15.7893 15.039 16 14.5303 16 13.9998V11.3332C16 11.1564 15.9298 10.9868 15.8047 10.8618C15.6797 10.7367 15.5101 10.6665 15.3333 10.6665Z" fill="#727A90" />
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_220_7263">
                                            <rect width="16" height="16" fill="white" />
                                        </clipPath>
                                    </defs>
                                </svg>
                            </div> */}

                            {
                                meeting.attachments.length > 0 ? meeting.attachments.map((attachment, index) => {
                                    return (
                                        <div className="attachment" key={index}>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none">
                                                <path fillRule="evenodd" clipRule="evenodd" d="M6.6665 5.8335C6.6665 4.45278 7.78579 3.3335 9.1665 3.3335H25.631C26.294 3.3335 26.9299 3.59689 27.3987 4.06573L32.6009 9.26793C33.0698 9.73677 33.3332 10.3727 33.3332 11.0357V34.1668C33.3332 35.5475 32.2139 36.6668 30.8332 36.6668H9.1665C7.78579 36.6668 6.6665 35.5475 6.6665 34.1668V5.8335ZM31.6665 11.6668H25.8332C25.3729 11.6668 24.9998 11.2937 24.9998 10.8335V5.00016H9.1665C8.70627 5.00016 8.33317 5.37326 8.33317 5.8335V34.1668C8.33317 34.6271 8.70627 35.0002 9.1665 35.0002H30.8332C31.2934 35.0002 31.6665 34.6271 31.6665 34.1668V11.6668Z" fill="#F1F2F4" />
                                                <path d="M6.6665 15.8335H33.3332V25.8335H6.6665V15.8335Z" fill="#F21E1E" />
                                                <path d="M12.1255 24.1666V18.106H14.629C15.0828 18.106 15.4744 18.1947 15.8039 18.3723C16.1353 18.5479 16.3908 18.7935 16.5703 19.1092C16.7499 19.4228 16.8396 19.7878 16.8396 20.2041C16.8396 20.6223 16.7479 20.9883 16.5644 21.302C16.3829 21.6137 16.1235 21.8554 15.7861 22.027C15.4488 22.1986 15.0483 22.2845 14.5847 22.2845H13.0399V21.1303H14.3124C14.5334 21.1303 14.7178 21.0919 14.8658 21.0149C15.0157 20.938 15.1292 20.8305 15.2061 20.6924C15.283 20.5523 15.3215 20.3895 15.3215 20.2041C15.3215 20.0167 15.283 19.8549 15.2061 19.7188C15.1292 19.5807 15.0157 19.4741 14.8658 19.3992C14.7158 19.3242 14.5314 19.2867 14.3124 19.2867H13.5903V24.1666H12.1255Z" fill="white" />
                                                <path d="M19.8019 24.1666H17.5617V18.106H19.7989C20.4164 18.106 20.9481 18.2273 21.394 18.4699C21.8418 18.7106 22.187 19.0579 22.4297 19.5116C22.6724 19.9634 22.7937 20.504 22.7937 21.1333C22.7937 21.7646 22.6724 22.3071 22.4297 22.7609C22.189 23.2147 21.8448 23.5629 21.3969 23.8055C20.9491 24.0462 20.4174 24.1666 19.8019 24.1666ZM19.0265 22.9177H19.7456C20.085 22.9177 20.372 22.8605 20.6068 22.7461C20.8435 22.6297 21.0221 22.4413 21.1424 22.1809C21.2647 21.9185 21.3259 21.5693 21.3259 21.1333C21.3259 20.6973 21.2647 20.3501 21.1424 20.0916C21.0201 19.8312 20.8396 19.6438 20.6009 19.5294C20.3641 19.413 20.0721 19.3548 19.7249 19.3548H19.0265V22.9177Z" fill="white" />
                                                <path d="M23.6489 24.1666V18.106H27.786V19.2956H25.1138V20.5385H27.5226V21.7311H25.1138V24.1666H23.6489Z" fill="white" />
                                            </svg>
                                            <div className="attachment-infos">
                                                <h4>{attachment.name.length > 20 ? `${attachment.name.slice(0, 20)}...` : attachment.name}</h4>

                                                <p>{Math.floor(attachment.size / 1000)} KB</p>
                                            </div>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none" className="download-attachment-icon"
                                                onClick={() => {
                                                    handleDownload(attachment.url, attachment.name)
                                                }}
                                            >
                                                <g clipPath="url(#clip0_220_7263)">
                                                    <path d="M6.58565 12.0813C6.77138 12.2672 6.99192 12.4146 7.23465 12.5152C7.47738 12.6158 7.73756 12.6676 8.00031 12.6676C8.26306 12.6676 8.52324 12.6158 8.76598 12.5152C9.00871 12.4146 9.22925 12.2672 9.41498 12.0813L11.5556 9.94067C11.6704 9.81373 11.732 9.64752 11.7276 9.47644C11.7232 9.30536 11.6532 9.14253 11.532 9.02165C11.4109 8.90077 11.2479 8.8311 11.0768 8.82707C10.9058 8.82304 10.7397 8.88496 10.613 9L8.66231 10.9513L8.66698 0.666667C8.66698 0.489856 8.59674 0.320286 8.47172 0.195262C8.34669 0.0702379 8.17712 0 8.00031 0V0C7.8235 0 7.65393 0.0702379 7.52891 0.195262C7.40388 0.320286 7.33365 0.489856 7.33365 0.666667L7.32765 10.9387L5.38765 9C5.26255 8.875 5.09292 8.8048 4.91608 8.80486C4.73923 8.80493 4.56965 8.87524 4.44465 9.00033C4.31964 9.12543 4.24945 9.29506 4.24951 9.4719C4.24957 9.64875 4.31989 9.81833 4.44498 9.94333L6.58565 12.0813Z" fill="#727A90" />
                                                    <path d="M15.3333 10.6665C15.1565 10.6665 14.987 10.7367 14.8619 10.8618C14.7369 10.9868 14.6667 11.1564 14.6667 11.3332V13.9998C14.6667 14.1766 14.5964 14.3462 14.4714 14.4712C14.3464 14.5963 14.1768 14.6665 14 14.6665H2C1.82319 14.6665 1.65362 14.5963 1.5286 14.4712C1.40357 14.3462 1.33333 14.1766 1.33333 13.9998V11.3332C1.33333 11.1564 1.2631 10.9868 1.13807 10.8618C1.01305 10.7367 0.843478 10.6665 0.666667 10.6665C0.489856 10.6665 0.320286 10.7367 0.195262 10.8618C0.0702379 10.9868 0 11.1564 0 11.3332L0 13.9998C0 14.5303 0.210714 15.039 0.585786 15.414C0.960859 15.7891 1.46957 15.9998 2 15.9998H14C14.5304 15.9998 15.0391 15.7891 15.4142 15.414C15.7893 15.039 16 14.5303 16 13.9998V11.3332C16 11.1564 15.9298 10.9868 15.8047 10.8618C15.6797 10.7367 15.5101 10.6665 15.3333 10.6665Z" fill="#727A90" />
                                                </g>
                                                <defs>
                                                    <clipPath id="clip0_220_7263">
                                                        <rect width="16" height="16" fill="white" />
                                                    </clipPath>
                                                </defs>
                                            </svg>
                                        </div>)
                                }) :
                                    <div className="attachment">
                                        <p>
                                            No attachments have been added
                                        </p>
                                    </div>
                            }

                        </div>
                    </div>
                    <div className="meeting-right-side">
                        <div className="meeting-agenda">
                            <h3>Meeting Agenda</h3>
                            <p>{meeting.description}</p>
                        </div>
                        <div className="meeting-activities">
                            <h3>Activities</h3>
                            {/* <div className="activity">
                                <div className="big-circle">
                                    <div className="small-circle"></div>
                                </div>

                                <div className="activity-content">
                                    <h4>New Task Added</h4>
                                    <p><span>Benjamin Gainyllo Joel</span> created new task</p>
                                </div>
                            </div>
                            <div className="activity">
                                <div className="big-circle">
                                    <div className="small-circle"></div>
                                </div>

                                <div className="activity-content">
                                    <h4>New Comment</h4>
                                    <p><span>Benjamin Gainyllo Joel</span> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris suscipit eget lorem </p>
                                </div>
                            </div>
                            <div className="activity">
                                <div className="big-circle">
                                    <div className="small-circle"></div>
                                </div>

                                <div className="activity-content">
                                    <h4>New Comment</h4>
                                    <p><span>Benjamin Gainyllo Joel</span> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris suscipit eget lorem </p>
                                </div>
                            </div>
                            <div className="activity">
                                <div className="big-circle">
                                    <div className="small-circle"></div>
                                </div>

                                <div className="activity-content">
                                    <h4>New Attachmenty</h4>
                                    <p><span>Admin</span> added new attachments</p>
                                    <div className="attachments-documents-cont">
                                        <div className="attachment-doc"></div>
                                        <div className="attachment-doc"></div>
                                        <div className="attachment-doc"></div>
                                    </div>
                                </div>
                            </div>
                            <div className="activity">
                                <div className="big-circle">
                                    <div className="small-circle"></div>
                                </div>

                                <div className="activity-content">
                                    <h4>New Comment</h4>
                                    <p><span>Benjamin Gainyllo Joel</span> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris suscipit eget lorem </p>
                                </div>
                            </div> */}
                            {
                                meeting.activities.map((activity, index) => {
                                    return (
                                        <div className="activity" key={index}>
                                            <div className="big-circle">
                                                <div className="small-circle"></div>
                                            </div>
                                            <div className="activity-content">
                                                <h4>{activity.title}</h4>
                                                <p><span>{activity.author}</span> {activity.description}</p>
                                                <span className="activity-time">
                                                    {formatMeetingDate(activity.createdAt.toString().split("T")[0], activity.createdAt.toString().split("T")[1], null)}
                                                </span>
                                            </div>
                                        </div>
                                    )
                                })
                            }
                        </div>
                    </div>
                </div>
                <h2>Meeting Attendancees</h2>
                <div className="overview-tables">

                    <Table
                        data={{
                            tableHeaders: user?.role === "admin" ? ["Name", "Status", "Keys"] : ["Name", "Status"],
                            tableData: meeting.attendances.map((attendance) => {
                                return user?.role === "admin" ?
                                    [
                                        attendance.user.firstname + " " + attendance.user.lastname,
                                        attendance.status,
                                        attendance.key.slice(0,6),
                                    ] : [
                                        attendance.user.firstname + " " + attendance.user.lastname,
                                        attendance.status
                                    ]
                            }),
                            type: "normal",
                            onRowClick: (row) => {
                                if (user?.role === "admin") {
                                    setPopupDisplay(true);
                                    setPopup(
                                        <EditAttendancePopup
                                            closePopup={() => {
                                                setPopupDisplay(false);
                                            }}
                                            attendanceId={meeting.attendances[row]._id}
                                            setUpdate={setUpdate}
                                        />
                                    )
                                }
                            }

                        }}
                    />
                </div>
            </div>
        </div>
    );
}